<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Paycheck Tracker</title>

<style>
body{
  font-family:-apple-system, Arial, sans-serif;
  background:#FFF8F0;
  margin:0;
  max-width:420px;
  margin:auto;
}

header{
  text-align:center;
  font-size:26px;
  padding:12px;
}

button, select{
  background:#FFD6A5;
  border:none;
  border-radius:8px;
  padding:6px 10px;
}

#calendarWrap{
  position:sticky;
  top:0;
  background:#FFF8F0;
  padding-bottom:6px;
  z-index:10;
}

.monthNav{
  display:flex;
  justify-content:center;
  gap:6px;
  margin-bottom:4px;
}

#miniCalendar{
  width:100%;
  border-collapse:collapse;
}

#miniCalendar th,#miniCalendar td{
  border:1px solid #ccc;
  height:38px;
  text-align:center;
  font-size:13px;
  border-radius:4px;
  cursor:pointer;
}

.today{
  border:2px solid #FFB347;
  box-shadow:0 0 5px #FFD580;
}

.selected{
  border:2px solid #FFB347;
}

.blue{background:#1E88E5;color:white}
.red{background:#E53935;color:white}
.purple{background:#A569BD;color:white}

#calendarInfo{
  background:#FFF3E0;
  padding:6px;
  border-radius:6px;
  font-size:12px;
  text-align:center;
  margin-top:4px;
}

.dashboard{
  display:flex;
  justify-content:space-around;
  background:#FFF3E0;
  margin:10px;
  padding:10px;
  border-radius:10px;
}

.section{
  margin:10px;
}

table{
  width:100%;
  border-collapse:collapse;
  box-shadow:0 2px 6px rgba(0,0,0,.1);
}

th,td{
  border:1px solid #ccc;
  font-size:12px;
  text-align:center;
  padding:4px;
}

input,select{
  width:95%;
  font-size:11px;
}

.remove{
  background:#FFB3B3;
  border:none;
  border-radius:6px;
}
</style>
</head>

<body>

<header>ðŸ’° Paycheck Tracker</header>

<div id="calendarWrap">
  <div class="monthNav">
    <button onclick="changeMonth(-1)">â—€</button>
    <select id="month"></select>
    <select id="year"></select>
    <button onclick="changeMonth(1)">â–¶</button>
    <button onclick="goToday()">Today</button>
  </div>

  <table id="miniCalendar">
    <thead>
      <tr><th>Su</th><th>Mo</th><th>Tu</th><th>We</th><th>Th</th><th>Fr</th><th>Sa</th></tr>
    </thead>
    <tbody></tbody>
  </table>

  <div id="calendarInfo">Select a day</div>
</div>

<div class="dashboard">
  <div>Income<br>$<span id="dIncome">0.00</span></div>
  <div>Bills<br>$<span id="dBills">0.00</span></div>
  <div>Left<br>$<span id="dLeft">0.00</span></div>
</div>

<div class="section">
<h3>Income</h3>
<button onclick="addIncome()">âž• Add Income</button>
<table>
<thead>
<tr><th>Type</th><th>Date</th><th>Expected</th><th>Actual</th><th></th></tr>
</thead>
<tbody id="incomeBody"></tbody>
</table>
</div>

<div class="section">
<h3>Bills</h3>
<button onclick="addBill()">âž• Add Bill</button>
<table>
<thead>
<tr><th>Name</th><th>Due</th><th>Amount</th><th>Paid</th><th></th></tr>
</thead>
<tbody id="billBody"></tbody>
</table>
</div>

<script>
const iso=(y,m,d)=>`${y}-${String(m+1).padStart(2,0)}-${String(d).padStart(2,0)}`;
const parse=d=>new Date(d);

let incomes=JSON.parse(localStorage.incomes||"[]");
let bills=JSON.parse(localStorage.bills||"[]");

let cur=new Date();
let sel=cur.getDate();

const monthSel=document.getElementById("month");
const yearSel=document.getElementById("year");

for(let i=0;i<12;i++) monthSel.add(new Option(new Date(0,i).toLocaleString('default',{month:'short'}),i));
for(let y=cur.getFullYear()-5;y<=cur.getFullYear()+5;y++) yearSel.add(new Option(y,y));

monthSel.value=cur.getMonth();
yearSel.value=cur.getFullYear();

monthSel.onchange=()=>{cur.setMonth(monthSel.value);render()};
yearSel.onchange=()=>{cur.setFullYear(yearSel.value);render()};

function save(){
  localStorage.incomes=JSON.stringify(incomes);
  localStorage.bills=JSON.stringify(bills);
}

function changeMonth(n){
  cur.setMonth(cur.getMonth()+n);
  monthSel.value=cur.getMonth();
  yearSel.value=cur.getFullYear();
  render();
}

function goToday(){
  cur=new Date();
  sel=cur.getDate();
  monthSel.value=cur.getMonth();
  yearSel.value=cur.getFullYear();
  render();
}

function renderCalendar(){
  const body=document.querySelector("#miniCalendar tbody");
  body.innerHTML="";
  const y=cur.getFullYear(),m=cur.getMonth();
  const first=new Date(y,m,1).getDay();
  const last=new Date(y,m+1,0).getDate();
  let row=body.insertRow();
  for(let i=0;i<first;i++) row.insertCell();

  for(let d=1;d<=last;d++){
    if(row.cells.length===7) row=body.insertRow();
    const c=row.insertCell();
    c.textContent=d;
    const ds=iso(y,m,d);
    const hasI=incomes.some(i=>i.date===ds);
    const hasB=bills.some(b=>b.date===ds);
    if(hasI&&hasB)c.classList.add("purple");
    else if(hasI)c.classList.add("blue");
    else if(hasB)c.classList.add("red");
    if(d===sel)c.classList.add("selected");
    const t=new Date();
    if(d===t.getDate()&&m===t.getMonth()&&y===t.getFullYear())c.classList.add("today");
    c.onclick=()=>{sel=d;render()};
  }
}

function calendarInfo(){
  const ds=iso(cur.getFullYear(),cur.getMonth(),sel);
  const list=[
    ...incomes.filter(i=>i.date===ds).map(i=>`Income $${i.actual}`),
    ...bills.filter(b=>b.date===ds).map(b=>`Bill $${b.amount}`)
  ];
  document.getElementById("calendarInfo").textContent=list.length?list.join(" | "):"No entries";
}

function renderTables(){
  incomeBody.innerHTML="";
  incomes.forEach((i,x)=>{
    if(parse(i.date).getMonth()!==cur.getMonth())return;
    incomeBody.innerHTML+=`
    <tr>
      <td><select onchange="incomes[${x}].type=this.value;save()">
        <option ${i.type==="Salary"?"selected":""}>Salary</option>
        <option ${i.type==="Other"?"selected":""}>Other</option>
      </select></td>
      <td><input type="date" value="${i.date}" onchange="incomes[${x}].date=this.value;save();render()"></td>
      <td><input value="${i.expected}" onchange="incomes[${x}].expected=this.value;save();render()"></td>
      <td><input value="${i.actual}" onchange="incomes[${x}].actual=this.value;save();render()"></td>
      <td><button class="remove" onclick="incomes.splice(${x},1);save();render()">ðŸ—‘</button></td>
    </tr>`;
  });

  billBody.innerHTML="";
  bills.forEach((b,x)=>{
    if(parse(b.date).getMonth()!==cur.getMonth())return;
    billBody.innerHTML+=`
    <tr>
      <td><input value="${b.name}" onchange="bills[${x}].name=this.value;save()"></td>
      <td><input type="date" value="${b.date}" onchange="bills[${x}].date=this.value;save();render()"></td>
      <td><input value="${b.amount}" onchange="bills[${x}].amount=this.value;save();render()"></td>
      <td><input type="checkbox" ${b.paid?"checked":""} onchange="bills[${x}].paid=this.checked;save()"></td>
      <td><button class="remove" onclick="bills.splice(${x},1);save();render()">ðŸ—‘</button></td>
    </tr>`;
  });
}

function dashboard(){
  const m=cur.getMonth(),y=cur.getFullYear();
  let carry=0,inc=0,bil=0;

  incomes.forEach(i=>{
    const d=parse(i.date);
    if(d<new Date(y,m,1)) carry+=+i.actual||0;
    if(d.getMonth()===m&&d.getFullYear()===y) inc+=+i.actual||0;
  });

  bills.forEach(b=>{
    const d=parse(b.date);
    if(d<new Date(y,m,1)) carry-=+b.amount||0;
    if(d.getMonth()===m&&d.getFullYear()===y) bil+=+b.amount||0;
  });

  dIncome.textContent=(carry+inc).toFixed(2);
  dBills.textContent=bil.toFixed(2);
  dLeft.textContent=(carry+inc-bil).toFixed(2);
}

function addIncome(){
  incomes.push({type:"Salary",date:iso(cur.getFullYear(),cur.getMonth(),sel),expected:"0.00",actual:"0.00"});
  save();render();
}

function addBill(){
  bills.push({name:"",date:iso(cur.getFullYear(),cur.getMonth(),sel),amount:"0.00",paid:false});
  save();render();
}

function render(){
  renderCalendar();
  calendarInfo();
  renderTables();
  dashboard();
}

render();
</script>

</body>
</html>