<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Paycheck Tracker VS40 Table</title>
<style>
body { font-family: Arial,sans-serif; background:#FDF9F5; margin:0; padding:0;}
header { text-align:center; font-size:28px; padding:12px; }
.monthNav { display:flex; justify-content:center; gap:10px; margin:10px; }
#miniCalendar { border-collapse:collapse; margin:auto; }
#miniCalendar th,#miniCalendar td { width:32px; height:32px; text-align:center; border:1px solid #ccc; font-size:14px; cursor:pointer; }
#miniCalendar td.today { background:#FFD6A5; border-radius:50%; }
.section { margin:10px; }
table { width:100%; border-collapse:collapse; }
th, td { border:1px solid #ccc; padding:6px; text-align:center; font-size:14px; }
.addEntryBtn { padding:6px 10px; border-radius:12px; background:#FFD6A5; border:none; cursor:pointer; margin:6px 0; font-size:14px; }
.switch { position:relative; display:inline-block; width:36px; height:20px; }
.switch input { opacity:0; width:0; height:0; }
.slider { position:absolute; cursor:pointer; top:0; left:0; right:0; bottom:0; background-color:#d1d5db; border-radius:24px; transition:0.4s; }
.slider:before { position:absolute; content:""; height:16px; width:16px; left:2px; bottom:2px; background:white; border-radius:50%; transition:0.4s; }
input:checked + .slider { background-color:#B9FBC1; }
input:checked + .slider:before { transform:translateX(16px); }
button.removeBtn { background:#FF6B6B; color:white; border:none; border-radius:6px; padding:4px 8px; cursor:pointer; font-size:12px; }
</style>
</head>
<body>

<header>üí∞ Paycheck Tracker</header>

<div class="monthNav">
  <select id="monthSelect"></select>
  <select id="yearSelect"></select>
</div>

<div id="miniCalendarContainer">
  <table id="miniCalendar">
    <thead>
      <tr>
        <th>Su</th><th>Mo</th><th>Tu</th><th>We</th><th>Th</th><th>Fr</th><th>Sa</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<div class="section">
<h3>Income</h3>
<button id="addIncomeBtn" class="addEntryBtn">‚ûï Add Income</button>
<table id="incomeTable">
<thead>
<tr>
<th>Type</th><th>Description</th><th>Date</th><th>Actual</th><th>Expected</th><th>Paid</th><th>Date Paid</th><th>Remove</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>

<div class="section">
<h3>Bills</h3>
<button id="addBillBtn" class="addEntryBtn">‚ûï Add Bill</button>
<table id="billTable">
<thead>
<tr>
<th>Bill Name</th><th>Date Due</th><th>Amount</th><th>Paid</th><th>Date Paid</th><th>Remove</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>

<script>
// --- Storage ---
let incomes = JSON.parse(localStorage.getItem("incomes"))||[];
let bills = JSON.parse(localStorage.getItem("bills"))||[];
let currentDate = new Date();
let selectedDay = null;

// --- Month/Year Dropdowns ---
const monthSelect=document.getElementById("monthSelect");
const yearSelect=document.getElementById("yearSelect");
for(let m=0;m<12;m++){
    let opt=document.createElement("option"); opt.value=m;
    opt.text=new Date(2000,m,1).toLocaleString('default',{month:'long'});
    monthSelect.appendChild(opt);
}
for(let y=currentDate.getFullYear()-5;y<=currentDate.getFullYear()+5;y++){
    let opt=document.createElement("option"); opt.value=y; opt.text=y; yearSelect.appendChild(opt);
}
monthSelect.value=currentDate.getMonth();
yearSelect.value=currentDate.getFullYear();
monthSelect.onchange=()=>{currentDate.setMonth(parseInt(monthSelect.value)); selectedDay=null; render();};
yearSelect.onchange=()=>{currentDate.setFullYear(parseInt(yearSelect.value)); selectedDay=null; render();};

// --- Mini Calendar ---
function renderMiniCalendar(){
    const tbody=document.querySelector("#miniCalendar tbody"); tbody.innerHTML="";
    const month=currentDate.getMonth(), year=currentDate.getFullYear();
    const firstDay=new Date(year,month,1).getDay();
    const lastDate=new Date(year,month+1,0).getDate();
    let row=document.createElement("tr");
    for(let i=0;i<firstDay;i++){ row.appendChild(document.createElement("td")); }
    for(let d=1; d<=lastDate; d++){
        const td=document.createElement("td"); td.textContent=d;
        if(d===new Date().getDate() && month===new Date().getMonth() && year===new Date().getFullYear()) td.className="today";
        td.onclick=()=>{selectedDay=d; render();}
        row.appendChild(td);
        if((firstDay+d)%7===0){ tbody.appendChild(row); row=document.createElement("tr"); }
    }
    tbody.appendChild(row);
}

// --- Render Tables ---
function render(){
    // Filter by selectedDay
    const filterFunc = e=>!selectedDay || new Date(e.date).getDate()===selectedDay;
    const incBody=document.querySelector("#incomeTable tbody"); incBody.innerHTML="";
    incomes.forEach((i,index)=>{
        if(filterFunc(i)){
            const tr=document.createElement("tr");
            tr.innerHTML=`
            <td><input type="text" value="${i.type||'Salary'}" onchange="incomes[${index}].type=this.value; saveData(); render();"></td>
            <td><input type="text" value="${i.description||''}" onchange="incomes[${index}].description=this.value; saveData(); render();"></td>
            <td><input type="date" value="${i.date||new Date().toISOString().split('T')[0]}" onchange="incomes[${index}].date=this.value; saveData(); render();"></td>
            <td><input type="number" value="${i.actual||0}" onchange="incomes[${index}].actual=parseFloat(this.value)||0; saveData(); render();"></td>
            <td><input type="number" value="${i.expected||0}" onchange="incomes[${index}].expected=parseFloat(this.value)||0; saveData(); render();"></td>
            <td><label class="switch"><input type="checkbox" ${i.paidDate?'checked':''} onchange="incomes[${index}].paidDate=this.checked?new Date().toISOString().split('T')[0]:''; saveData(); render();"><span class="slider"></span></label></td>
            <td><input type="date" value="${i.paidDate||''}" onchange="incomes[${index}].paidDate=this.value; saveData(); render();"></td>
            <td><button class="removeBtn" onclick="incomes.splice(${index},1); saveData(); render();">üóëÔ∏è</button></td>`;
            incBody.appendChild(tr);
        }
    });

    const billBody=document.querySelector("#billTable tbody"); billBody.innerHTML="";
    bills.forEach((b,index)=>{
        if(filterFunc(b)){
            const tr=document.createElement("tr");
            tr.innerHTML=`
            <td><input type="text" value="${b.name||''}" onchange="bills[${index}].name=this.value; saveData(); render();"></td>
            <td><input type="date" value="${b.date||new Date().toISOString().split('T')[0]}" onchange="bills[${index}].date=this.value; saveData(); render();"></td>
            <td><input type="number" value="${b.amount||0}" onchange="bills[${index}].amount=parseFloat(this.value)||0; saveData(); render();"></td>
            <td><label class="switch"><input type="checkbox" ${b.paidDate?'checked':''} onchange="bills[${index}].paidDate=this.checked?new Date().toISOString().split('T')[0]:''; saveData(); render();"><span class="slider"></span></label></td>
            <td><input type="date" value="${b.paidDate||''}" onchange="bills[${index}].paidDate=this.value; saveData(); render();"></td>
            <td><button class="removeBtn" onclick="bills.splice(${index},1); saveData(); render();">üóëÔ∏è</button></td>`;
            billBody.appendChild(tr);
        }
    });
    renderMiniCalendar();
}

// --- Add Buttons ---
document.getElementById("addIncomeBtn").onclick=()=>{
    incomes.push({type:'Salary',description:'',date:new Date().toISOString().split('T')[0],actual:0,expected:0,paidDate:''});
    saveData(); render();
};
document.getElementById("addBillBtn").onclick=()=>{
    bills.push({name:'Bill',date:new Date().toISOString().split('T')[0],amount:0,paidDate:''});
    saveData(); render();
};

// --- LocalStorage ---
function saveData(){ localStorage.setItem("incomes",JSON.stringify(incomes)); localStorage.setItem("bills",JSON.stringify(bills)); }

// Initial render
render();
</script>
</body>
</html>