<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">

<!-- iPhone PWA settings -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="Paycheck Tracker">

<!-- APP ICON (temporary emoji icon) -->
<link rel="apple-touch-icon" href="https://via.placeholder.com/180/4CAF50/ffffff?text=%F0%9F%92%B0">

<title>Paycheck Tracker</title>

<style>
:root {
  --bg: #f2f2f7;
  --card: #ffffff;
  --text: #000;
  --accent: #4CAF50;
}

body.dark {
  --bg: #000;
  --card: #1c1c1e;
  --text: #fff;
  --accent: #30d158;
}

body {
  margin: 0;
  padding: env(safe-area-inset-top) 16px env(safe-area-inset-bottom);
  background: var(--bg);
  color: var(--text);
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro";
}

header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 0;
}

button {
  background: var(--accent);
  color: #fff;
  border: none;
  border-radius: 12px;
  padding: 10px 14px;
  font-size: 16px;
}

.card {
  background: var(--card);
  border-radius: 16px;
  padding: 14px;
  margin-bottom: 14px;
}

input {
  width: 100%;
  padding: 10px;
  margin-top: 6px;
  margin-bottom: 10px;
  border-radius: 10px;
  border: 1px solid #ccc;
  font-size: 16px;
}

.section-title {
  font-size: 22px;
  margin: 20px 0 10px;
}
</style>
</head>

<body>
<header>
  <h1>ðŸ’° Paycheck Tracker</h1>
  <button onclick="toggleTheme()">ðŸŒ™</button>
</header>

<div class="section-title">Paychecks</div>
<button onclick="addPaycheck()">âž• Add Paycheck</button>
<div id="paychecks"></div>

<div class="section-title">Bills</div>
<button onclick="addBill()">âž• Add Bill</button>
<div id="bills"></div>

<script>
let paychecks = JSON.parse(localStorage.getItem("paychecks")) || [];
let bills = JSON.parse(localStorage.getItem("bills")) || [];
let dark = JSON.parse(localStorage.getItem("dark")) || false;

if (dark) document.body.classList.add("dark");

function save() {
  localStorage.setItem("paychecks", JSON.stringify(paychecks));
  localStorage.setItem("bills", JSON.stringify(bills));
  localStorage.setItem("dark", JSON.stringify(dark));
}

function toggleTheme() {
  dark = !dark;
  document.body.classList.toggle("dark");
  save();
}

function render() {
  document.getElementById("paychecks").innerHTML = paychecks.map((p,i)=>`
    <div class="card">
      <input type="date" value="${p.date||''}" onchange="paychecks[${i}].date=this.value;save()">
      <input type="number" placeholder="Expected Amount" value="${p.expected||''}" onchange="paychecks[${i}].expected=this.value;save()">
      <input type="number" placeholder="Actual Amount" value="${p.actual||''}" onchange="paychecks[${i}].actual=this.value;save()">
      <div>Difference: ${(p.actual||0)-(p.expected||0)}</div>
    </div>
  `).join("");

  document.getElementById("bills").innerHTML = bills.map((b,i)=>`
    <div class="card">
      <input placeholder="Bill Name" value="${b.name||''}" onchange="bills[${i}].name=this.value;save()">
      <input type="date" value="${b.due||''}" onchange="bills[${i}].due=this.value;save()">
      <input type="number" placeholder="Amount Due" value="${b.amount||''}" onchange="bills[${i}].amount=this.value;save()">
      <input type="number" placeholder="Amount Paid" value="${b.paid||''}" onchange="bills[${i}].paid=this.value;save()">
      <label>
        <input type="checkbox" ${b.paid>=b.amount?"checked":""} disabled>
        Paid
      </label>
    </div>
  `).join("");
}

function addPaycheck(){ paychecks.push({}); save(); render(); }
function addBill(){ bills.push({}); save(); render(); }

render();
</script>
</body>
</html>
